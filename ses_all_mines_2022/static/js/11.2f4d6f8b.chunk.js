(this.webpackJsonpall_mines_2022=this.webpackJsonpall_mines_2022||[]).push([[11],{669:function(e,o,r){"use strict";r.d(o,"a",(function(){return g})),r.d(o,"b",(function(){return b}));var t=r(0),a=r(163),n=r(649),i=r(479),c=r(513),l=r(226),s=r(663),p=r(356);const g="allMines_2022Layer",u=Object.entries({"Early Stage ":[37,144,216],"Mine Stage":[110,45,135],"Late Stage ":[0,70,145]}).map((e=>({color:e[1],label:e[0]}))),d={title:"Stage",visible:!0,legend:{attr:"stage",type:p.LEGEND_TYPES.CATEGORY,labels:u.map((e=>e.label)),colors:u.map((e=>e.color))}};function b(e,o,r){const p=Object(a.useDispatch)(),{allMines_2022Layer:u}=Object(a.useSelector)((e=>e.carto.layers)),b=Object(a.useSelector)((e=>Object(l.selectSourceById)(e,null===u||void 0===u?void 0:u.source))),m=Object(s.useCartoLayerProps)({source:b}),y="No data",_=Object(t.useMemo)((()=>(null===b||void 0===b?void 0:b.data)&&Object(n.a)({type:b.type,connection:b.connection,source:b.data,format:"geojson"})),[null===b||void 0===b?void 0:b.type,null===b||void 0===b?void 0:b.data,null===b||void 0===b?void 0:b.connection]);if(u&&b)return new c.a({...m,data:_,dataTransform:e=>e.data,id:g,pointType:"icon",pickable:!0,getIconSize:e=>e.properties.prop_id===o?25:13,getIconColor:Object(i.a)({attr:"stage",domain:["Early Stage ","Mine Stage","Late Stage "],colors:[[37,144,216],[110,45,135],[0,70,145]]}),getIcon:e=>({url:"https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/oil-well-18.svg",width:24,height:24,mask:!0}),onDataLoad:e=>{p(Object(l.updateLayer)({id:g,layerAttributes:{...d}})),m.onDataLoad&&m.onDataLoad(e)},updateTriggers:{...m.updateTriggers,getIconSize:o},visible:u.visible,onClick:o=>{null!==o&&void 0!==o&&o.object?(r(o.object.properties.prop_id),e({coordinates:o.object.geometry.coordinates,propsObject:{fields:[{label:"Property",value:o.object.properties.prop_name||y},{label:"Primary Commodity",value:o.object.properties.primary_commodity||y},{label:"Other Commodities",value:o.object.properties.commodities_list||y},{label:"Development Stage",value:o.object.properties.dev_stage||y},{label:"Stage",value:o.object.properties.stage||y},{label:"Operator",value:o.object.properties.operator_name||y},{label:"Operator HQ",value:o.object.properties.operator_hq||y},{label:"Operator Country",value:o.object.properties.operator_country||y},{label:"Owner",value:o.object.properties.owner_name||y},{label:"Owner HQ",value:o.object.properties.owner_hq||y},{label:"Owner Country",value:o.object.properties.owner_country||y},{label:"State/Province",value:o.object.properties.state_province||y},{label:"Country",value:o.object.properties.country_name||y}]}})):r(null)}})}},698:function(e,o){},786:function(e,o,r){"use strict";r.r(o),r.d(o,"default",(function(){return _}));var t=r(0);var a={id:"allMines_2022Source",type:r(19).h.QUERY,connection:"carto_dw",data:"SELECT geom,stage,prop_name,primary_commodity,dev_stage,snl_global_region,country_name,state_province,operator_name,operator_country,operator_global_region,owner_name,owner_country,owner_global_region,prop_id FROM `carto-dw-ac-qz0vkdhv`.shared.All_Mines_2022"},n=r(669),i=r(163),c=r(226),l=r(480),s=r(618),p=r(629),g=r(670),u=r(292),d=r(356),b=r(150),m=r(13);const y=Object(l.a)((()=>({allMines_2022:{}})));function _(){const e=Object(i.useDispatch)(),o=y();Object(t.useEffect)((()=>(e(Object(c.addSource)(a)),e(Object(c.addLayer)({id:n.a,source:a.id})),()=>{e(Object(c.removeLayer)(n.a)),e(Object(c.removeSource)(a.id))})),[e]),d.cartoThemeOptions.palette.secondary.main="#212529",d.cartoThemeOptions.palette.secondary.dark="#818d99";const r=Object(b.b)(d.cartoThemeOptions);return Object(m.jsxs)(p.a,{container:!0,direction:"column",className:o.allMines_2022,children:[Object(m.jsx)(g.FormulaWidget,{id:"activeMines",title:"Active mines",dataSource:"allMines_2022Source",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsxs)(s.a,{theme:r,children:[Object(m.jsx)(g.CategoryWidget,{id:"propertyName",title:"Property Name",dataSource:"allMines_2022Source",column:"prop_name",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"primaryCommodity",title:"Primary Commodity",dataSource:"allMines_2022Source",column:"primary_commodity",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"developmentStage",title:"Development Stage",dataSource:"allMines_2022Source",column:"dev_stage",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"miningStage",title:"Mining Stage",dataSource:"allMines_2022Source",column:"stage",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"globalRegion",title:"Global Region",dataSource:"allMines_2022Source",column:"snl_global_region",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"country",title:"Country",dataSource:"allMines_2022Source",column:"country_name",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"stateProvince",title:"State/Province",dataSource:"allMines_2022Source",column:"state_province",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"operatorName",title:"Operator Name",dataSource:"allMines_2022Source",column:"operator_name",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"operatorCountry",title:"Operator Country",dataSource:"allMines_2022Source",column:"operator_country",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"operatorRegion",title:"Operator Region",dataSource:"allMines_2022Source",column:"operator_global_region",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"ownerName",title:"Owner Name",dataSource:"allMines_2022Source",column:"owner_name",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"ownerCountry",title:"Owner Country",dataSource:"allMines_2022Source",column:"owner_country",operation:u.AggregationTypes.COUNT,onError:console.error}),Object(m.jsx)(g.CategoryWidget,{id:"ownerRegion",title:"Owner Region",dataSource:"allMines_2022Source",column:"owner_global_region",operation:u.AggregationTypes.COUNT,onError:console.error})]})]})}}}]);
//# sourceMappingURL=11.2f4d6f8b.chunk.js.map